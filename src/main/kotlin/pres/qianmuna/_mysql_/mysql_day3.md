

# mysql lock 和 事务

    事务 隔离级别
    show global veriables like 'tx_isolation';
    
## 数据库 事务

    什么是 事务？
    
    操作数据库的逻辑顺序得集
    一系列得 操作
    
    事务四大特性
    A   原子性 最小
    D   持久性 永久
            page备份
                双写 缓冲
                redo log 数据 恢复 
    I   隔离性 不影响别人数据
            多个事务 隔离 
    C   一致性
        ADI 共同保证实现
        
> 什么时候 出现 事务？

    增删改 自动 开始 事务
    
    关闭自动 提交 需要手动cimmit了
    
    手动开启事务
    begin；
    start transction;  // 可以携带 更多得参数
    结束事务
    提交
    回滚
    连接断开 // 不会 提交事务
    
    
> 事务并发 问题

    读一致性问题：

    A:
    事务a查询
    事务b修改
    事务a 查询到 事务b 未提交得数据？ // 脏读 // 读到脏页 
    
    B:
    事务a 读到 事务b提交得 得数据
    两次 读数据 不一致 // 不可重复读 （两次读到数据 不一致）  （update/delete）
    
    C:
    事务a读到范围数据
    第二次读到 更多数据 // 幻读 // insert // 插入 带来的 读不一致性
    
                 
> 事务隔离级别解决：

    读未提交
        为解决 任何问题 事务 未提交 数据 对 其他事务可见
    
    读已提交
        只能 看到 其他事务提交 得 修改 // 出现不可重复读 // 幻读
    
    可重复读（innodb 默认）
        同一个事物 读到结果一致 // 未解决 幻读
    
    串行化 （强制 排队）
        最高隔离级别 // 强制事务串行执行
        
        
        
        
        
        
    